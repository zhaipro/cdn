<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>随机展示</title>
    <script type="text/javascript">
        function init() {
            var t = 3;
            if(location.search) {
                t = parseInt(location.search.substring(1));
            }
            setInterval(function(){
                var r = Math.random();
                img.src="/images?x=" + r;
                a.href = "/images?x=" + r;
            }, t * 1000);
        };
        function img_onload() {
            var p = img.height / img.width;
            var q = window.innerHeight / window.innerWidth;
            if(p < q) {
                var s = 100 * (1 - p / q);
                a.style.left = 0;
                a.style.top = s / 2 + "%";
                a.style.width = "100%";
                a.style.height = (100 - s) + "%";
                img.style.height = "";
                img.style.width = "100%";
            } else {
                var s = 100 * (1 - q / p);
                a.style.left = s / 2 + "%";
                a.style.top = 0;
                a.style.width = (100 - s) + "%";
                a.style.height = "100%";
                img.style.height = "100%";
                img.style.width = "";
            }
        }
    </script>
</head>
<body onload="init()" bgcolor="#0f0f0f">
    <a id="a" target="_blank" style="position: absolute">
        <img src="/images" id="img" onload="img_onload()" />
    </a>
</body>
</html>
